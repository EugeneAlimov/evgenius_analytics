"use strict";(self.webpackChunkinterface=self.webpackChunkinterface||[]).push([[265],{4817:function(e,n,t){var r=t(885),a=t(2791),i=function(){var e=window;return[e.innerWidth,e.innerHeight]};n.Z=function(){var e=(0,a.useState)(i()),n=(0,r.Z)(e,2),t=n[0],o=n[1];return(0,a.useEffect)((function(){function e(){o(i())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}},2760:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var r=t(885),a=t(2791),i=t(9434),o=t(763),s=t.n(o),c=t(4817),l=t(4045);var u=function(e){var n=e,t=new FileReader;t.onload=function(e){var n=new Uint8Array(e.target.result),t=l.ij(n,{type:"array"}),r=l.P6.book_new();r.Props={Title:"Node-red TagsList"};for(var a=t.SheetNames[0],i=t.Sheets[a],o=l.P6.decode_range(i["!ref"]),s=Object.values(o)[1].r,c=1,u=[],d="";c<s;c++){var p=i["A".concat(c)],f=String(p?p.v:void 0);if(!f.includes("Spare")){var h=i["B".concat(c)],x=String(h?h.v:void 0),v=i["C".concat(c)],g=String(v?v.v:void 0),m=i["D".concat(c)],Z=String(m?m.v:void 0),b="",j="";if(Z.includes("%"))b="Timer"===g?"MD"+Z.slice(2):Z.slice(1),j="".concat(f," - ").concat(x);else{if(x.includes("Struct")){for(var y=4,w=!0;w;){var S=l.P6.encode_cell({c:y,r:c-1}),k=i["".concat(S)],C=String(k?k.v:void 0).trim();if("undefined"===C)w=!1;else 4===y&&(d=""),d="".concat(d," - ").concat(C),y++}continue}var _="";"Bool"===x?(_="X",g.includes(".")||(g+=".0")):"Int"===x?_="DI":"Dint"===x?_="DW":"Real"===x?_="R":"Time"===x&&(_="DW"),_.includes("X")||g.includes(".0")&&(g=g.slice(0,g.length-2)),b="".concat(Z,",").concat(_).concat(g),j="".concat(f).concat(d),console.log(j,c,s)}var T=[];T.push(b,j),u.push(T)}}var P=l.P6.aoa_to_sheet(u);l.P6.sheet_to_csv(P),l.P6.book_append_sheet(r,P),l.NC(r,"Node-red TagsList.csv",{bookType:"csv",FS:"\t"})},t.readAsArrayBuffer(n)},d=t(4165),p=t(5861),f=t(1044),h=function(){var e=(0,p.Z)((0,d.Z)().mark((function e(n){var t,r;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",n),e.prev=2,e.next=5,f.ZP.post("http://192.168.8.167/api/v1/pars-tags-list/",t,{headers:{"Content-Type":"multipart/form-data"}});case 5:return r=e.sent,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(2),console.log("error: ",e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,p.Z)((0,d.Z)().mark((function e(n){var t;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.ZP.put("http://192.168.8.167/tags-to-ws/",{label:n,headers:{}});case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log("error: ",e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),v=t(6650),g=t(3595),m=t(228),Z=t(7205),b=t(1413),j=t(5814),y=t(4565),w=t(6132),S=t(9978),k=t(9520),C=t(8823),_=t(1048),T=t(4162),P=t(7463),z=t(2262),D=t(2338),E=t(8499),A=t(3329),F=function(e){var n=e.height,t=(0,i.I0)(),o=(0,i.v9)((function(e){return e.analytic.tags})),s=(0,i.v9)((function(e){return e.analytic.groups})),c=(0,a.useState)(null),l=(0,r.Z)(c,2),u=l[0],d=l[1],p=(0,a.useState)(""),f=(0,r.Z)(p,2),h=f[0],x=f[1],g=(0,a.useState)(null),Z=(0,r.Z)(g,2),F=Z[0],W=Z[1],I=(0,a.useState)([]),L=(0,r.Z)(I,2),R=L[0],H=L[1],N=(0,a.useState)([]),q=(0,r.Z)(N,2),B=q[0],G=q[1];(0,a.useEffect)((function(){d(F)}),[F]),(0,a.useEffect)((function(){if(null!==u){var e=o.filter((function(e){return e.label===u.label}));H(e)}else H(o)}),[u,o]),(0,a.useEffect)((function(){var e=R.filter((function(e){return e.name_tag.toLowerCase().includes(h.toLowerCase())}));G(e)}),[R,h]);var O=B.length,U=n-282;return(0,A.jsxs)(v.Z,{sx:{p:2,m:2,height:n-64,width:"420px"},elevation:10,square:!0,children:[(0,A.jsx)(m.Z,{component:"div",mb:0,p:1,sx:{border:"none",minHeight:"10px"},children:(0,A.jsx)(y.Z,{display:"block",sx:{color:"#666666",fontSize:26,ml:2},children:"Please, select a tags from list"})}),(0,A.jsx)(v.Z,{sx:{m:0},elevation:5,square:!0,children:(0,A.jsx)(m.Z,{component:"div",mb:2,p:2,sx:{border:"none",minHeight:"10px"},children:(0,A.jsxs)(T.Z,{direction:"column",spacing:3,children:[(0,A.jsx)(P.Z,{value:h,onChange:function(e){return x(e.currentTarget.value)},sx:{offset:100},id:"outlined-search",label:"Search tag",type:"search",size:"small"}),(0,A.jsx)(z.Z,{size:"small",disablePortal:!0,id:"combo-box-demo",options:s,sx:{offset:100},freeSolo:!0,value:F,onChange:function(e,n){W(n)},renderInput:function(e){return(0,A.jsx)(P.Z,(0,b.Z)((0,b.Z)({},e),{},{label:"Filter by group"}))}})]})})}),(0,A.jsx)(D.t7,{height:U,width:"100%",itemSize:64,itemCount:O,layout:"vertical",overscanCount:8,children:function(e){var n=e.index,r=e.style;return(0,A.jsx)(j.Z,{placement:"right",title:(0,A.jsxs)(y.Z,{sx:{m:0},paragraph:!0,children:["Address: ",B[n].address,(0,A.jsx)("br",{}),"Datatype: ",B[n].data_type,(0,A.jsx)("br",{}),"Tagtable: ",B[n].tag_table,(0,A.jsx)("br",{}),"Comment: ",B[n].comment,(0,A.jsx)("br",{}),"Group: ",B[n].label]}),style:r,children:(0,A.jsx)(w.ZP,{divider:!0,dense:!0,children:(0,A.jsxs)(S.Z,{role:void 0,onClick:function(){return t((0,E.df)(B[n].id))},dense:!0,children:[(0,A.jsx)(k.Z,{sx:{minWidth:"35px"},children:(0,A.jsx)(C.Z,{edge:"start",checked:B[n].on_dashboard,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":B[n].id}})}),(0,A.jsx)(_.Z,{id:B[n].id,primary:(0,A.jsxs)(y.Z,{sx:{m:0,overflowWrap:"break-word"},paragraph:!0,noWrap:!1,children:[B[n].name_tag," ",(0,A.jsx)("br",{})]})})]})})},n)}})]})},W=t(5629),I=t(3811),L=t(7247),R=function(e){var n=e.height,t=(0,a.useState)([]),o=(0,r.Z)(t,2),s=o[0],c=o[1],l=(0,i.I0)(),u=(0,i.v9)((function(e){return e.analytic.tags}));(0,a.useEffect)((function(){var e=u.filter((function(e){return!0===e.on_dashboard}));c(e)}),[u]);return(0,A.jsxs)(v.Z,{sx:{p:2,m:2,height:n-64,width:"420px"},elevation:10,square:!0,children:[(0,A.jsx)(m.Z,{component:"div",mb:0,p:1,sx:{border:"none",minHeight:"10px"},children:(0,A.jsx)(y.Z,{display:"block",sx:{color:"#666666",fontSize:26,ml:2},children:"Selected tags"})}),(0,A.jsx)(W.Z,{style:{overflowY:"scroll",height:"".concat(n-146,"px"),paddingRight:"12px",bgcolor:"background.paper"},children:s.map((function(e){var n="checkbox-list-label-".concat(e),t=e.id,r=e.name_tag,a=e.tag_table,i=e.address,o=e.data_type,s=e.comment,c=e.label;return(0,A.jsx)(j.Z,{placement:"right",title:(0,A.jsxs)(y.Z,{sx:{m:0,overflowWrap:"break-word"},paragraph:!0,children:["Address: ",i,(0,A.jsx)("br",{}),"Datatype: ",o,(0,A.jsx)("br",{}),"Tagtable: ",a,(0,A.jsx)("br",{}),"Comment: ",s]}),children:(0,A.jsxs)(w.ZP,{divider:!0,dense:!0,children:[(0,A.jsx)(_.Z,{id:n,primary:(0,A.jsxs)(y.Z,{sx:{m:0,overflowWrap:"break-word"},paragraph:!0,children:["TAG: ",r,(0,A.jsx)("br",{}),"GROUP: ",c]})}),(0,A.jsx)(I.Z,{onClick:function(){return function(e){l((0,E.df)(e))}(t)},edge:"end","aria-label":"comments",children:(0,A.jsx)(L.Z,{})})]})},t)}))})]})},H=t(1647),N=t(8771),q=t(277),B=function(){var e=(0,i.v9)((function(e){return e.login.token.refresh})),n=(0,i.I0)(),t=(0,q.ZP)("input")({display:"none"}),o=(0,a.useState)(null),s=(0,r.Z)(o,2),c=s[0],l=s[1],d=a.useState({open:!1,vertical:"top",horizontal:"right",message:""}),p=(0,r.Z)(d,2),f=p[0],x=p[1];(0,a.useEffect)((function(){if(c){var n=function(e){x({open:!0,message:e,vertical:"top",horizontal:"left"})};h(c,e).then((function(e){console.log("response: ",e),n("File uploaded")})).catch((function(e){n("File upload failed"),console.error(e)})),u(c)}}),[e,n,c]);var v=f.vertical,g=f.horizontal,m=f.open,j=f.message,y=function(){x((0,b.Z)((0,b.Z)({},f),{},{open:!1}))};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("form",{encType:"multipart/form-data",method:"post",children:(0,A.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,A.jsx)(t,{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"contained-button-file",multiple:!1,type:"file",value:void 0,hiden:"true",onChange:function(e){return l(e.currentTarget.files[0])}}),(0,A.jsx)(Z.Z,{variant:"contained",component:"span",children:"Upload excel file"})]})}),(0,A.jsx)(H.Z,{anchorOrigin:{vertical:v,horizontal:g},open:m,onClose:y,autoHideDuration:6e3,children:(0,A.jsx)(N.Z,{onClose:y,severity:"success",sx:{width:"100%",mt:"210px"},children:j})},v+g)]})},G=function(){var e=(0,a.useState)([]),n=(0,r.Z)(e,2),t=n[0],o=n[1],l=(0,i.v9)((function(e){return e.analytic.tags})),d=(0,a.useState)(),p=(0,r.Z)(d,2),f=p[0],b=p[1],j=(0,c.Z)(),y=(0,r.Z)(j,2),w=(y[0],y[1]);(0,a.useEffect)((function(){var e=s().cloneDeep(l);o(e)}),[]);return(0,A.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,A.jsxs)(v.Z,{style:{display:"flex",flexDirection:"column",backgroundColor:"#f9f8f8",margin:20,padding:15},children:[(0,A.jsx)(g.Z,{type:"file",onChange:function(e){return b(e.currentTarget.files[0])}}),(0,A.jsx)(Z.Z,{sx:{m:2,width:"360px",height:"50px"},variant:"contained",size:"large",onClick:function(){u(f)},children:"To CSV"}),(0,A.jsx)(Z.Z,{sx:{m:2,width:"360px",height:"50px"},variant:"contained",size:"large",onClick:function(){h(f)},children:"To analityc"}),(0,A.jsx)(Z.Z,{sx:{m:2,width:"360px",height:"50px"},variant:"contained",size:"large",onClick:function(){var e=[];console.log("comparedArr ",t),console.log("tags ",l),t.forEach((function(n,t){n.on_dashboard!==l[t].on_dashboard&&e.push(l[t])})),console.log("tempArr ",e),x(e).finally()},children:"To dashboard"}),(0,A.jsx)(B,{})]}),(0,A.jsx)(F,{height:w}),(0,A.jsx)(R,{height:w})]})}}}]);
//# sourceMappingURL=Settings.1d5cd9cb.chunk.js.map